стр 142
Прежде чем переходить к обсуждению внепроцессных зависимостей и моков,
я кратко напомню типы зависимостей (за подробностями обращайтесь к главе 2):
  совместная (shared) зависимость — зависимость, совместно используемая тестами (не рабочим кодом);
  внепроцессная (out-of-process) зависимость — зависимость, находящаяся в процессе, отличном от процесса, в котором выполняется программа (например, база
данных, шина сообщений или SMTP-сервис);
 приватная зависимость — любая зависимость, не являющаяся совместной.

Если совместная зависимость не является внепроцессной, можно легко избежать
ее переиспользования в тестах, создавая новый ее экземпляр при каждом запуске
теста. Если же совместная зависимость является внепроцессной, тестирование
усложняется. Невозможно создавать новый экземпляр базы данных или шины сообщений перед каждым выполнением теста; это привело бы к слишком сильному
замедлению тестов. Обычно в таких ситуациях эти зависимости заменяются тестовыми заглушками — моками и стабами

Но не все внепроцессные зависимости должны заменяться моками. Если внепроцессная зависимость доступна только через ваше приложение, взаимодействия
с ней не являются частью наблюдаемого поведения вашей системы. Внепроцессная
зависимость, которую нельзя увидеть извне, по сути, является частью вашего приложения.